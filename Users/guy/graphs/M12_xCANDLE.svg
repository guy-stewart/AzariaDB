<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 7.1.0 (20230121.1956)
 -->
<!-- Title: Automaton Pages: 1 -->
<svg width="2068pt" height="160pt"
 viewBox="0.00 0.00 2068.00 160.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 156)">
<title>Automaton</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-156 2064,-156 2064,4 -4,4"/>
<!-- filename -->
<g id="node1" class="node">
<title>filename</title>
<polygon fill="none" stroke="black" points="0,-10 0,-142 322,-142 322,-10 0,-10"/>
<polygon fill="none" stroke="black" points="11,-117 11,-135 311,-135 311,-117 11,-117"/>
<text text-anchor="start" x="127.99" y="-124" font-family="Courier New" font-weight="bold" font-size="10.00">M12_xCANDLE</text>
<polygon fill="none" stroke="black" points="11,-37 11,-115 311,-115 311,-37 11,-37"/>
<text text-anchor="start" x="14" y="-103" font-family="Courier New" font-size="10.00" fill="green"> The candle casts the spell.</text>
<text text-anchor="start" x="14" y="-91" font-family="Courier New" font-size="10.00" fill="green">WIP1: CANDLELIGHT</text>
<text text-anchor="start" x="14" y="-79" font-family="Courier New" font-size="10.00" fill="green">WIP2: NYSTROMADDED</text>
<text text-anchor="start" x="14" y="-67" font-family="Courier New" font-size="10.00" fill="green">WIP3: INGREDIENTS_MGR</text>
<text text-anchor="start" x="14" y="-55" font-family="Courier New" font-size="10.00" fill="green">WIP4: SCROLL holder</text>
<text text-anchor="start" x="14" y="-43" font-family="Courier New" font-size="10.00" fill="green">SIG_EMPTY: From candlelight when candle burns out</text>
<polygon fill="none" stroke="black" points="11,-17 11,-35 311,-35 311,-17 11,-17"/>
<text text-anchor="start" x="115.99" y="-23" font-family="Courier New" font-size="10.00" fill="brown">start state = 0</text>
<polygon fill="none" stroke="black" points="8,-14 8,-138 314,-138 314,-14 8,-14"/>
</g>
<!-- 0 -->
<g id="node2" class="node">
<title>0</title>
<polyline fill="none" stroke="darkred" points="351,-99 645,-99"/>
<text text-anchor="start" x="493.8" y="-106.4" font-family="Courier New" font-weight="bold" font-size="14.00">0</text>
<polyline fill="none" stroke="darkred" points="351,-31 645,-31"/>
<polyline fill="none" stroke="darkred" points="645,-97 351,-97"/>
<text text-anchor="start" x="354" y="-85" font-family="Courier New" font-size="10.00" fill="blue">0::onExit():</text>
<text text-anchor="start" x="354" y="-73" font-family="Courier New" font-size="10.00" fill="blue">REF_MACHINE(WIP4); &#160;&#160;&#160;// ... the scroll holder</text>
<text text-anchor="start" x="354" y="-61" font-family="Courier New" font-size="10.00" fill="blue">BFRAME=R_WOBJECT; &#160;&#160;&#160;&#160;&#160;&#160;// ... the scroll </text>
<text text-anchor="start" x="354" y="-49" font-family="Courier New" font-size="10.00" fill="blue">MAPi(BFRAME,S12_SCROLL); // ... the spell id</text>
<text text-anchor="start" x="354" y="-37" font-family="Courier New" font-size="10.00" fill="blue">MAPi(BFRAME,S12_ING_NY); &#160;&#160;// ... the spell cost</text>
<path fill="none" stroke="darkred" d="M360,-28C360,-28 636,-28 636,-28 642,-28 648,-34 648,-40 648,-40 648,-112 648,-112 648,-118 642,-124 636,-124 636,-124 360,-124 360,-124 354,-124 348,-118 348,-112 348,-112 348,-40 348,-40 348,-34 354,-28 360,-28"/>
</g>
<!-- 0&#45;&gt;0 -->
<g id="edge1" class="edge">
<title>0&#45;&gt;0</title>
<path fill="none" stroke="black" d="M655.85,-79.58C667.12,-78.77 674,-77.57 674,-76 674,-75.07 671.57,-74.27 667.24,-73.6"/>
<polygon fill="black" stroke="black" points="667.67,-70.12 657.36,-72.58 666.95,-77.09 667.67,-70.12"/>
<polygon fill="none" stroke="black" points="677,-77 677,-95 815,-95 815,-77 677,-77"/>
<text text-anchor="start" x="716" y="-84" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">CLICK(0,0)</text>
<polygon fill="none" stroke="black" points="677,-57 677,-75 815,-75 815,-57 677,-57"/>
<text text-anchor="start" x="680" y="-63" font-family="Courier New" font-size="10.00" fill="blue">SIGNAL(WIP1,SIG_HIDE);</text>
<polygon fill="none" stroke="black" points="674,-54 674,-98 818,-98 818,-54 674,-54"/>
</g>
<!-- 0&#45;&gt;0 -->
<g id="edge2" class="edge">
<title>0&#45;&gt;0</title>
<path fill="none" stroke="black" d="M655.87,-85.61C737.77,-86.49 818,-83.29 818,-76 818,-69.05 745.12,-65.82 667.37,-66.3"/>
<polygon fill="black" stroke="black" points="667.35,-62.8 657.38,-66.38 667.41,-69.8 667.35,-62.8"/>
<polygon fill="none" stroke="black" points="821,-131 821,-149 1295,-149 1295,-131 821,-131"/>
<text text-anchor="start" x="1006.99" y="-138" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">DRAG(0,IDD_MATCH)</text>
<polygon fill="none" stroke="black" points="821,-3 821,-129 1295,-129 1295,-3 821,-3"/>
<text text-anchor="start" x="824" y="-117" font-family="Courier New" font-size="10.00" fill="blue">// magic candle can&#39;t light without enough nystrom!</text>
<text text-anchor="start" x="824" y="-105" font-family="Courier New" font-size="10.00" fill="blue">if (BPARM == BFRAME) {</text>
<text text-anchor="start" x="824" y="-93" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;// check to see if the spell is ready</text>
<text text-anchor="start" x="824" y="-81" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;SIGNAL(WIP3, SIG_CHECK);</text>
<text text-anchor="start" x="824" y="-69" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;REF_MACHINE(WIP3);</text>
<text text-anchor="start" x="824" y="-57" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;if ((R_WPARM &gt; 0) &amp;&amp; (R_WPARM == R_BPARM)) {</text>
<text text-anchor="start" x="824" y="-45" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SIGNAL(WIP1, SIG_SHOW); // WIP1 is the candle light</text>
<text text-anchor="start" x="824" y="-33" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BPARM = 0; // &#45;&#45;BPARM GOES TO ZERO AS THE NYSTROM CATCHES FIRE</text>
<text text-anchor="start" x="824" y="-21" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;}</text>
<text text-anchor="start" x="824" y="-9" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;}</text>
<polygon fill="none" stroke="black" points="818,0 818,-152 1298,-152 1298,0 818,0"/>
</g>
<!-- 0&#45;&gt;0 -->
<g id="edge3" class="edge">
<title>0&#45;&gt;0</title>
<path fill="none" stroke="black" d="M655.57,-87.05C890.95,-94.25 1298,-90.57 1298,-76 1298,-61.66 903.57,-57.87 666.73,-64.62"/>
<polygon fill="black" stroke="black" points="666.98,-61.11 657.09,-64.9 667.19,-68.1 666.98,-61.11"/>
<polygon fill="none" stroke="black" points="1301,-125 1301,-143 1763,-143 1763,-125 1301,-125"/>
<text text-anchor="start" x="1477.99" y="-132" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">DRAG(0,IDD_SCOOPF)</text>
<polygon fill="none" stroke="black" points="1301,-9 1301,-123 1763,-123 1763,-9 1301,-9"/>
<text text-anchor="start" x="1304" y="-111" font-family="Courier New" font-size="10.00" fill="blue">/* &#160;&#160;BFRAME is how much for the spell</text>
<text text-anchor="start" x="1304" y="-99" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;&#160;BPARM is how much stored in the candle</text>
<text text-anchor="start" x="1304" y="-87" font-family="Courier New" font-size="10.00" fill="blue">*/</text>
<text text-anchor="start" x="1304" y="-75" font-family="Courier New" font-size="10.00" fill="blue">if (BPARM &lt; BFRAME) { &#160;&#160;&#160;// BPARM is how much stored in the candle</text>
<text text-anchor="start" x="1304" y="-63" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;ADDI(BPARM,1);</text>
<text text-anchor="start" x="1304" y="-51" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;PLAYWAVE(SOUND_SLURP);</text>
<text text-anchor="start" x="1304" y="-39" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;SIGNAL(WIP2, SIG_SHOW); // WIP2 is the nystrom meter (M12_xNYSTROMADDED)</text>
<text text-anchor="start" x="1304" y="-27" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;HANDOFF(0,IDD_SCOOPE);</text>
<text text-anchor="start" x="1304" y="-15" font-family="Courier New" font-size="10.00" fill="blue">}</text>
<polygon fill="none" stroke="black" points="1298,-6 1298,-146 1766,-146 1766,-6 1298,-6"/>
</g>
<!-- 0&#45;&gt;0 -->
<g id="edge4" class="edge">
<title>0&#45;&gt;0</title>
<path fill="none" stroke="black" d="M655.8,-88.35C998.33,-100.99 1766,-96.87 1766,-76 1766,-55.36 1015.1,-51.1 667.24,-63.24"/>
<polygon fill="black" stroke="black" points="667.18,-59.74 657.31,-63.59 667.43,-66.73 667.18,-59.74"/>
<polygon fill="none" stroke="black" points="1769,-77 1769,-95 2003,-95 2003,-77 1769,-77"/>
<text text-anchor="start" x="1837.99" y="-84" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">WAIT(,SIG_EMPTY)</text>
<polygon fill="none" stroke="black" points="1769,-57 1769,-75 2003,-75 2003,-57 1769,-57"/>
<text text-anchor="start" x="1772" y="-63" font-family="Courier New" font-size="10.00" fill="blue">ASSIGN(BPARM,0);SIGNAL(WIP2,SIG_HIDE);</text>
<polygon fill="none" stroke="black" points="1766,-54 1766,-98 2006,-98 2006,-54 1766,-54"/>
</g>
</g>
</svg>

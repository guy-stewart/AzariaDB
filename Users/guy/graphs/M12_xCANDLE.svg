<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 7.1.0 (20230121.1956)
 -->
<!-- Title: Automaton Pages: 1 -->
<svg width="2068pt" height="172pt"
 viewBox="0.00 0.00 2068.00 172.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 168)">
<title>Automaton</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-168 2064,-168 2064,4 -4,4"/>
<!-- filename -->
<g id="node1" class="node">
<title>filename</title>
<polygon fill="none" stroke="black" points="0,-16 0,-148 322,-148 322,-16 0,-16"/>
<polygon fill="none" stroke="black" points="11,-123 11,-141 311,-141 311,-123 11,-123"/>
<text text-anchor="start" x="127.99" y="-130" font-family="Courier New" font-weight="bold" font-size="10.00">M12_xCANDLE</text>
<polygon fill="none" stroke="black" points="11,-43 11,-121 311,-121 311,-43 11,-43"/>
<text text-anchor="start" x="14" y="-109" font-family="Courier New" font-size="10.00" fill="green"> The candle casts the spell.</text>
<text text-anchor="start" x="14" y="-97" font-family="Courier New" font-size="10.00" fill="green">WIP1: CANDLELIGHT</text>
<text text-anchor="start" x="14" y="-85" font-family="Courier New" font-size="10.00" fill="green">WIP2: NYSTROMADDED</text>
<text text-anchor="start" x="14" y="-73" font-family="Courier New" font-size="10.00" fill="green">WIP3: INGREDIENTS_MGR</text>
<text text-anchor="start" x="14" y="-61" font-family="Courier New" font-size="10.00" fill="green">WIP4: SCROLL holder</text>
<text text-anchor="start" x="14" y="-49" font-family="Courier New" font-size="10.00" fill="green">SIG_EMPTY: From candlelight when candle burns out</text>
<polygon fill="none" stroke="black" points="11,-23 11,-41 311,-41 311,-23 11,-23"/>
<text text-anchor="start" x="115.99" y="-29" font-family="Courier New" font-size="10.00" fill="brown">start state = 0</text>
<polygon fill="none" stroke="black" points="8,-20 8,-144 314,-144 314,-20 8,-20"/>
</g>
<!-- 0 -->
<g id="node2" class="node">
<title>0</title>
<polyline fill="none" stroke="darkred" points="351,-99 645,-99"/>
<text text-anchor="start" x="493.8" y="-106.4" font-family="Courier New" font-weight="bold" font-size="14.00">0</text>
<polyline fill="none" stroke="darkred" points="351,-43 645,-43"/>
<polyline fill="none" stroke="darkred" points="645,-97 351,-97"/>
<text text-anchor="start" x="354" y="-85" font-family="Courier New" font-size="10.00" fill="blue">REF_MACHINE(WIP4); &#160;&#160;&#160;// ... the scroll holder</text>
<text text-anchor="start" x="354" y="-73" font-family="Courier New" font-size="10.00" fill="blue">BFRAME=R_WOBJECT; &#160;&#160;&#160;&#160;&#160;&#160;// ... the scroll </text>
<text text-anchor="start" x="354" y="-61" font-family="Courier New" font-size="10.00" fill="blue">MAPi(BFRAME,S12_SCROLL); // ... the spell id</text>
<text text-anchor="start" x="354" y="-49" font-family="Courier New" font-size="10.00" fill="blue">MAPi(BFRAME,S12_ING_NY); &#160;&#160;// ... the spell cost</text>
<path fill="none" stroke="darkred" d="M360,-40C360,-40 636,-40 636,-40 642,-40 648,-46 648,-52 648,-52 648,-112 648,-112 648,-118 642,-124 636,-124 636,-124 360,-124 360,-124 354,-124 348,-118 348,-112 348,-112 348,-52 348,-52 348,-46 354,-40 360,-40"/>
</g>
<!-- 0&#45;&gt;0 -->
<g id="edge1" class="edge">
<title>0&#45;&gt;0</title>
<path fill="none" stroke="black" d="M655.85,-85.17C667.12,-84.45 674,-83.39 674,-82 674,-81.17 671.57,-80.47 667.24,-79.88"/>
<polygon fill="black" stroke="black" points="667.64,-76.4 657.36,-78.97 667,-83.37 667.64,-76.4"/>
<polygon fill="none" stroke="black" points="677,-83 677,-101 815,-101 815,-83 677,-83"/>
<text text-anchor="start" x="716" y="-90" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">CLICK(0,0)</text>
<polygon fill="none" stroke="black" points="677,-63 677,-81 815,-81 815,-63 677,-63"/>
<text text-anchor="start" x="680" y="-69" font-family="Courier New" font-size="10.00" fill="blue">SIGNAL(WIP1,SIG_HIDE);</text>
<polygon fill="none" stroke="black" points="674,-60 674,-104 818,-104 818,-60 674,-60"/>
</g>
<!-- 0&#45;&gt;0 -->
<g id="edge2" class="edge">
<title>0&#45;&gt;0</title>
<path fill="none" stroke="black" d="M655.87,-90.5C737.77,-91.28 818,-88.45 818,-82 818,-75.86 745.12,-72.99 667.37,-73.42"/>
<polygon fill="black" stroke="black" points="667.35,-69.92 657.38,-73.49 667.41,-76.92 667.35,-69.92"/>
<polygon fill="none" stroke="black" points="821,-143 821,-161 1295,-161 1295,-143 821,-143"/>
<text text-anchor="start" x="1006.99" y="-150" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">DRAG(0,IDD_MATCH)</text>
<polygon fill="none" stroke="black" points="821,-3 821,-141 1295,-141 1295,-3 821,-3"/>
<text text-anchor="start" x="824" y="-129" font-family="Courier New" font-size="10.00" fill="blue">// magic candle can&#39;t light without enough nystrom!</text>
<text text-anchor="start" x="824" y="-117" font-family="Courier New" font-size="10.00" fill="blue">if (BPARM == BFRAME) {</text>
<text text-anchor="start" x="824" y="-105" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;// check to see if the spell is ready</text>
<text text-anchor="start" x="824" y="-93" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;SIGNAL(WIP3, SIG_CHECK);</text>
<text text-anchor="start" x="824" y="-81" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;REF_MACHINE(WIP3);</text>
<text text-anchor="start" x="824" y="-69" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;if ((R_WPARM &gt; 0) &amp;&amp; (R_WPARM == R_BPARM)) {</text>
<text text-anchor="start" x="824" y="-57" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SIGNAL(WIP1, SIG_SHOW); // WIP1 is the candle light</text>
<text text-anchor="start" x="824" y="-45" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BPARM = 0; // &#45;&#45;BPARM GOES TO ZERO AS THE NYSTROM CATCHES FIRE</text>
<text text-anchor="start" x="824" y="-33" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;}</text>
<text text-anchor="start" x="824" y="-21" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;}</text>
<text text-anchor="start" x="824" y="-9" font-family="Courier New" font-size="10.00" fill="blue">}</text>
<polygon fill="none" stroke="black" points="818,0 818,-164 1298,-164 1298,0 818,0"/>
</g>
<!-- 0&#45;&gt;0 -->
<g id="edge3" class="edge">
<title>0&#45;&gt;0</title>
<path fill="none" stroke="black" d="M655.57,-91.78C890.95,-98.15 1298,-94.89 1298,-82 1298,-69.32 903.96,-65.96 667.08,-71.92"/>
<polygon fill="black" stroke="black" points="666.99,-68.42 657.09,-72.18 667.17,-75.42 666.99,-68.42"/>
<polygon fill="none" stroke="black" points="1301,-131 1301,-149 1763,-149 1763,-131 1301,-131"/>
<text text-anchor="start" x="1477.99" y="-138" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">DRAG(0,IDD_SCOOPF)</text>
<polygon fill="none" stroke="black" points="1301,-15 1301,-129 1763,-129 1763,-15 1301,-15"/>
<text text-anchor="start" x="1304" y="-117" font-family="Courier New" font-size="10.00" fill="blue">/* &#160;&#160;BFRAME is how much for the spell</text>
<text text-anchor="start" x="1304" y="-105" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;&#160;BPARM is how much stored in the candle</text>
<text text-anchor="start" x="1304" y="-93" font-family="Courier New" font-size="10.00" fill="blue">*/</text>
<text text-anchor="start" x="1304" y="-81" font-family="Courier New" font-size="10.00" fill="blue">if (BPARM &lt; BFRAME) { &#160;&#160;&#160;// BPARM is how much stored in the candle</text>
<text text-anchor="start" x="1304" y="-69" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;ADDI(BPARM,1);</text>
<text text-anchor="start" x="1304" y="-57" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;PLAYWAVE(SOUND_SLURP);</text>
<text text-anchor="start" x="1304" y="-45" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;SIGNAL(WIP2, SIG_SHOW); // WIP2 is the nystrom meter (M12_xNYSTROMADDED)</text>
<text text-anchor="start" x="1304" y="-33" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;HANDOFF(0,IDD_SCOOPE);</text>
<text text-anchor="start" x="1304" y="-21" font-family="Courier New" font-size="10.00" fill="blue">}</text>
<polygon fill="none" stroke="black" points="1298,-12 1298,-152 1766,-152 1766,-12 1298,-12"/>
</g>
<!-- 0&#45;&gt;0 -->
<g id="edge4" class="edge">
<title>0&#45;&gt;0</title>
<path fill="none" stroke="black" d="M655.8,-92.93C998.33,-104.1 1766,-100.46 1766,-82 1766,-63.74 1015.1,-59.98 667.24,-70.71"/>
<polygon fill="black" stroke="black" points="667.19,-67.21 657.31,-71.03 667.42,-74.21 667.19,-67.21"/>
<polygon fill="none" stroke="black" points="1769,-83 1769,-101 2003,-101 2003,-83 1769,-83"/>
<text text-anchor="start" x="1837.99" y="-90" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">WAIT(,SIG_EMPTY)</text>
<polygon fill="none" stroke="black" points="1769,-63 1769,-81 2003,-81 2003,-63 1769,-63"/>
<text text-anchor="start" x="1772" y="-69" font-family="Courier New" font-size="10.00" fill="blue">ASSIGN(BPARM,0);SIGNAL(WIP2,SIG_HIDE);</text>
<polygon fill="none" stroke="black" points="1766,-60 1766,-104 2006,-104 2006,-60 1766,-60"/>
</g>
</g>
</svg>

<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 7.1.0 (20230121.1956)
 -->
<!-- Title: Automaton Pages: 1 -->
<svg width="811pt" height="1081pt"
 viewBox="0.00 0.00 811.00 1081.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1077)">
<title>Automaton</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-1077 807,-1077 807,4 -4,4"/>
<!-- filename -->
<g id="node1" class="node">
<title>filename</title>
<polygon fill="none" stroke="black" points="0,-940.5 0,-1072.5 364,-1072.5 364,-940.5 0,-940.5"/>
<polygon fill="none" stroke="black" points="11,-1047.5 11,-1065.5 353,-1065.5 353,-1047.5 11,-1047.5"/>
<text text-anchor="start" x="152" y="-1054.5" font-family="Courier New" font-weight="bold" font-size="10.00">M12_xPLANT</text>
<polygon fill="none" stroke="black" points="11,-967.5 11,-1045.5 353,-1045.5 353,-967.5 11,-967.5"/>
<text text-anchor="start" x="14" y="-1033.5" font-family="Courier New" font-size="10.00" fill="green">used in the temple to hold ingredients for spell making.</text>
<text text-anchor="start" x="14" y="-1021.5" font-family="Courier New" font-size="10.00" fill="green">WIP1: The scroll holder</text>
<text text-anchor="start" x="14" y="-1009.5" font-family="Courier New" font-size="10.00" fill="green">WIP2: The scroll map</text>
<text text-anchor="start" x="14" y="-997.5" font-family="Courier New" font-size="10.00" fill="green">SIG_SHOW: A scroll was dropped</text>
<text text-anchor="start" x="14" y="-985.5" font-family="Courier New" font-size="10.00" fill="green">SIG_HIDE: The scroll was grabbed</text>
<text text-anchor="start" x="14" y="-973.5" font-family="Courier New" font-size="10.00" fill="green">SIG_CLOSE: The spell is cast</text>
<polygon fill="none" stroke="black" points="11,-947.5 11,-965.5 353,-965.5 353,-947.5 11,-947.5"/>
<text text-anchor="start" x="136.99" y="-953.5" font-family="Courier New" font-size="10.00" fill="brown">start state = 0</text>
<polygon fill="none" stroke="black" points="8,-944.5 8,-1068.5 356,-1068.5 356,-944.5 8,-944.5"/>
</g>
<!-- 0 -->
<g id="node2" class="node">
<title>0</title>
<polyline fill="none" stroke="darkred" points="393,-1023.5 567,-1023.5"/>
<text text-anchor="start" x="475.8" y="-1030.9" font-family="Courier New" font-weight="bold" font-size="14.00">0</text>
<polyline fill="none" stroke="darkred" points="393,-967.5 567,-967.5"/>
<polyline fill="none" stroke="darkred" points="567,-1021.5 393,-1021.5"/>
<text text-anchor="start" x="396" y="-1009.5" font-family="Courier New" font-size="10.00" fill="green">IDLE</text>
<text text-anchor="start" x="396" y="-997.5" font-family="Courier New" font-size="10.00" fill="green">Wait here when no scroll</text>
<text text-anchor="start" x="396" y="-985.5" font-family="Courier New" font-size="10.00" fill="green">or ingredient not required </text>
<text text-anchor="start" x="396" y="-973.5" font-family="Courier New" font-size="10.00" fill="green">for the current scroll spell</text>
<path fill="none" stroke="darkred" d="M402,-964.5C402,-964.5 558,-964.5 558,-964.5 564,-964.5 570,-970.5 570,-976.5 570,-976.5 570,-1036.5 570,-1036.5 570,-1042.5 564,-1048.5 558,-1048.5 558,-1048.5 402,-1048.5 402,-1048.5 396,-1048.5 390,-1042.5 390,-1036.5 390,-1036.5 390,-976.5 390,-976.5 390,-970.5 396,-964.5 402,-964.5"/>
</g>
<!-- show_hint -->
<g id="node3" class="node">
<title>show_hint</title>
<polyline fill="none" stroke="darkred" points="252,-831 480,-831"/>
<text text-anchor="start" x="328.19" y="-838.4" font-family="Courier New" font-weight="bold" font-size="14.00">show_hint</text>
<polyline fill="none" stroke="darkred" points="252,-787 480,-787"/>
<polyline fill="none" stroke="darkred" points="480,-829 252,-829"/>
<text text-anchor="start" x="266.98" y="-817" font-family="Courier New" font-size="10.00" fill="green">1. There is a scroll attached</text>
<text text-anchor="start" x="266.98" y="-805" font-family="Courier New" font-size="10.00" fill="green">2. If this ingredient is required</text>
<text text-anchor="start" x="266.98" y="-793" font-family="Courier New" font-size="10.00" fill="green"> &#160;&#160;then a hint is displayed</text>
<polyline fill="none" stroke="darkred" points="252,-611 480,-611"/>
<polyline fill="none" stroke="darkred" points="480,-785 252,-785"/>
<text text-anchor="start" x="255" y="-773" font-family="Courier New" font-size="10.00" fill="blue">show_hint::onEntry():</text>
<text text-anchor="start" x="255" y="-761" font-family="Courier New" font-size="10.00" fill="blue">// find the ingredient</text>
<text text-anchor="start" x="255" y="-749" font-family="Courier New" font-size="10.00" fill="blue">// from S12_ING_x in wip2</text>
<text text-anchor="start" x="255" y="-737" font-family="Courier New" font-size="10.00" fill="blue">// and store in it bframe</text>
<text text-anchor="start" x="255" y="-725" font-family="Courier New" font-size="10.00" fill="blue">REF_MACHINE(WIP1);</text>
<text text-anchor="start" x="255" y="-713" font-family="Courier New" font-size="10.00" fill="blue">BFRAME=R_WOBJECT;</text>
<text text-anchor="start" x="255" y="-701" font-family="Courier New" font-size="10.00" fill="blue">MAPi(BFRAME,S12_SCROLL);</text>
<text text-anchor="start" x="255" y="-689" font-family="Courier New" font-size="10.00" fill="blue">MAP(BFRAME,WIP2);</text>
<text text-anchor="start" x="255" y="-677" font-family="Courier New" font-size="10.00" fill="blue">WACCEPT = BFRAME;</text>
<text text-anchor="start" x="255" y="-665" font-family="Courier New" font-size="10.00" fill="blue">if (WACCEPT &gt; 0) {</text>
<text text-anchor="start" x="255" y="-653" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;SHOW(WIP3); // show hint</text>
<text text-anchor="start" x="255" y="-641" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;MAPi(WACCEPT,S12_NATURE_REP);</text>
<text text-anchor="start" x="255" y="-629" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;C_ACCEPT(WACCEPT);</text>
<text text-anchor="start" x="255" y="-617" font-family="Courier New" font-size="10.00" fill="blue">}</text>
<polyline fill="none" stroke="darkred" points="252,-579 480,-579"/>
<polyline fill="none" stroke="darkred" points="480,-609 252,-609"/>
<text text-anchor="start" x="305.99" y="-597" font-family="Courier New" font-size="10.00" fill="blue">show_hint::onExit():</text>
<text text-anchor="start" x="305.99" y="-585" font-family="Courier New" font-size="10.00" fill="blue">SHOW();</text>
<path fill="none" stroke="darkred" d="M261,-576C261,-576 471,-576 471,-576 477,-576 483,-582 483,-588 483,-588 483,-844 483,-844 483,-850 477,-856 471,-856 471,-856 261,-856 261,-856 255,-856 249,-850 249,-844 249,-844 249,-588 249,-588 249,-582 255,-576 261,-576"/>
</g>
<!-- 0&#45;&gt;show_hint -->
<g id="edge1" class="edge">
<title>0&#45;&gt;show_hint</title>
<path fill="none" stroke="black" d="M416.24,-960.6C402.5,-952.63 387.67,-945.21 373,-940 344.69,-929.94 258.78,-944.62 239,-922 217.8,-897.76 220.8,-869.57 235.39,-842"/>
<polygon fill="black" stroke="black" points="238.27,-844 240.25,-833.6 232.21,-840.5 238.27,-844"/>
<text text-anchor="start" x="243" y="-898" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">WAIT(,SIG_SHOW)</text>
</g>
<!-- show_hint&#45;&gt;0 -->
<g id="edge11" class="edge">
<title>show_hint&#45;&gt;0</title>
<path fill="none" stroke="black" d="M343.42,-859.93C345.14,-881.57 350.07,-902.99 360,-922 364.71,-931.02 378.24,-942.57 394.59,-954.19"/>
<polygon fill="black" stroke="black" points="392.47,-956.98 402.69,-959.78 396.45,-951.22 392.47,-956.98"/>
<text text-anchor="start" x="364" y="-898" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">WAIT(,SIG_HIDE)</text>
</g>
<!-- show_hint&#45;&gt;0 -->
<g id="edge12" class="edge">
<title>show_hint&#45;&gt;0</title>
<path fill="none" stroke="black" d="M450.85,-859.76C453.42,-865.85 455.82,-871.94 458,-878 466.16,-900.69 471.34,-926.78 474.61,-949.42"/>
<polygon fill="black" stroke="black" points="471.11,-949.62 475.91,-959.06 478.04,-948.69 471.11,-949.62"/>
<polygon fill="none" stroke="black" points="472,-901 472,-919 550,-919 550,-901 472,-901"/>
<text text-anchor="start" x="475" y="-908" font-family="Courier New" font-weight="bold" font-size="10.00" fill="blue">Z_EPSILON(,)</text>
<polygon fill="none" stroke="black" points="472,-881 472,-899 550,-899 550,-881 472,-881"/>
<text text-anchor="start" x="475" y="-887" font-family="Courier New" font-size="10.00" fill="brown">(WACCEPT==0)</text>
<polygon fill="none" stroke="black" points="469,-878 469,-922 553,-922 553,-878 469,-878"/>
</g>
<!-- ready -->
<g id="node5" class="node">
<title>ready</title>
<polyline fill="none" stroke="darkred" points="402,-451 582,-451"/>
<text text-anchor="start" x="471" y="-458.4" font-family="Courier New" font-weight="bold" font-size="14.00">ready</text>
<polyline fill="none" stroke="darkred" points="402,-419 582,-419"/>
<polyline fill="none" stroke="darkred" points="582,-449 402,-449"/>
<text text-anchor="start" x="405" y="-437" font-family="Courier New" font-size="10.00" fill="green">1. There is a scroll attached</text>
<text text-anchor="start" x="405" y="-425" font-family="Courier New" font-size="10.00" fill="green">2. An ingredient is present</text>
<path fill="none" stroke="darkred" d="M411,-416C411,-416 573,-416 573,-416 579,-416 585,-422 585,-428 585,-428 585,-464 585,-464 585,-470 579,-476 573,-476 573,-476 411,-476 411,-476 405,-476 399,-470 399,-464 399,-464 399,-428 399,-428 399,-422 405,-416 411,-416"/>
</g>
<!-- show_hint&#45;&gt;ready -->
<g id="edge10" class="edge">
<title>show_hint&#45;&gt;ready</title>
<path fill="none" stroke="black" d="M356.92,-572.18C357.5,-539.95 360.95,-511.33 370,-498 373.55,-492.78 377.74,-488.09 382.4,-483.88"/>
<polygon fill="black" stroke="black" points="384.44,-486.73 390.07,-477.75 380.07,-481.26 384.44,-486.73"/>
<polygon fill="none" stroke="black" points="373,-527 373,-545 463,-545 463,-527 373,-527"/>
<text text-anchor="start" x="391" y="-534" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">DROP(0,0)</text>
<polygon fill="none" stroke="black" points="373,-507 373,-525 463,-525 463,-507 373,-507"/>
<text text-anchor="start" x="376" y="-513" font-family="Courier New" font-size="10.00" fill="blue">SHOW(WOBJECT);</text>
<polygon fill="none" stroke="black" points="370,-504 370,-548 466,-548 466,-504 370,-504"/>
</g>
<!-- hold_if_invalid -->
<g id="node4" class="node">
<title>hold_if_invalid</title>
<polyline fill="none" stroke="darkred" points="340,-203 568,-203"/>
<text text-anchor="start" x="390.99" y="-210.4" font-family="Courier New" font-weight="bold" font-size="14.00">hold_if_invalid</text>
<polyline fill="none" stroke="darkred" points="340,-171 568,-171"/>
<polyline fill="none" stroke="darkred" points="568,-201 340,-201"/>
<text text-anchor="start" x="381.99" y="-189" font-family="Courier New" font-size="10.00" fill="green">Wait here if the object</text>
<text text-anchor="start" x="381.99" y="-177" font-family="Courier New" font-size="10.00" fill="green">is invalid for the spell</text>
<polyline fill="none" stroke="darkred" points="340,-7 568,-7"/>
<polyline fill="none" stroke="darkred" points="568,-169 340,-169"/>
<text text-anchor="start" x="343" y="-157" font-family="Courier New" font-size="10.00" fill="blue">hold_if_invalid::onEntry():</text>
<text text-anchor="start" x="343" y="-145" font-family="Courier New" font-size="10.00" fill="blue">// find the ingredient</text>
<text text-anchor="start" x="343" y="-133" font-family="Courier New" font-size="10.00" fill="blue">// from S12_ING_x in wip2</text>
<text text-anchor="start" x="343" y="-121" font-family="Courier New" font-size="10.00" fill="blue">// and store in it bframe</text>
<text text-anchor="start" x="343" y="-109" font-family="Courier New" font-size="10.00" fill="blue">REF_MACHINE(WIP1);</text>
<text text-anchor="start" x="343" y="-97" font-family="Courier New" font-size="10.00" fill="blue">BFRAME=R_WOBJECT;</text>
<text text-anchor="start" x="343" y="-85" font-family="Courier New" font-size="10.00" fill="blue">MAPi(BFRAME,S12_SCROLL);</text>
<text text-anchor="start" x="343" y="-73" font-family="Courier New" font-size="10.00" fill="blue">MAP(BFRAME,WIP2);</text>
<text text-anchor="start" x="343" y="-61" font-family="Courier New" font-size="10.00" fill="blue">WACCEPT = BFRAME;</text>
<text text-anchor="start" x="343" y="-49" font-family="Courier New" font-size="10.00" fill="blue">if (WACCEPT &gt; 0) {</text>
<text text-anchor="start" x="343" y="-37" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;MAPi(WACCEPT,S12_NATURE_REP);</text>
<text text-anchor="start" x="343" y="-25" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;C_ACCEPT(WACCEPT);</text>
<text text-anchor="start" x="343" y="-13" font-family="Courier New" font-size="10.00" fill="blue">}</text>
<path fill="none" stroke="darkred" d="M349,-4C349,-4 559,-4 559,-4 565,-4 571,-10 571,-16 571,-16 571,-216 571,-216 571,-222 565,-228 559,-228 559,-228 349,-228 349,-228 343,-228 337,-222 337,-216 337,-216 337,-16 337,-16 337,-10 343,-4 349,-4"/>
</g>
<!-- hold_if_invalid&#45;&gt;show_hint -->
<g id="edge2" class="edge">
<title>hold_if_invalid&#45;&gt;show_hint</title>
<path fill="none" stroke="black" d="M415.63,-231.77C392.68,-306.61 365.75,-406.95 354,-498 350.81,-522.68 353.07,-529.13 354,-554 354.09,-556.35 354.18,-558.72 354.28,-561.11"/>
<polygon fill="black" stroke="black" points="350.78,-561.04 354.73,-570.86 357.77,-560.71 350.78,-561.04"/>
<text text-anchor="start" x="381" y="-382" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">GRAB(,)</text>
</g>
<!-- hold_if_invalid&#45;&gt;ready -->
<g id="edge3" class="edge">
<title>hold_if_invalid&#45;&gt;ready</title>
<path fill="none" stroke="black" d="M438.54,-231.92C436.37,-271.68 437.52,-316.23 447,-356 450.78,-371.86 457.87,-388.09 465.32,-402.27"/>
<polygon fill="black" stroke="black" points="462.16,-403.79 470.03,-410.88 468.3,-400.43 462.16,-403.79"/>
<text text-anchor="start" x="451" y="-320" font-family="Courier New" font-weight="bold" font-size="10.00" fill="blue">IS_A(WOBJECT,WACCEPT)</text>
</g>
<!-- no_scroll -->
<g id="node6" class="node">
<title>no_scroll</title>
<polyline fill="none" stroke="darkred" points="601,-327 787,-327"/>
<text text-anchor="start" x="656.19" y="-334.4" font-family="Courier New" font-weight="bold" font-size="14.00">no_scroll</text>
<polyline fill="none" stroke="darkred" points="601,-295 787,-295"/>
<polyline fill="none" stroke="darkred" points="787,-325 601,-325"/>
<text text-anchor="start" x="604" y="-313" font-family="Courier New" font-size="10.00" fill="green">1. There is no scroll attached</text>
<text text-anchor="start" x="604" y="-301" font-family="Courier New" font-size="10.00" fill="green">2. An ingredient is present</text>
<path fill="none" stroke="darkred" d="M610,-292C610,-292 778,-292 778,-292 784,-292 790,-298 790,-304 790,-304 790,-340 790,-340 790,-346 784,-352 778,-352 778,-352 610,-352 610,-352 604,-352 598,-346 598,-340 598,-340 598,-304 598,-304 598,-298 604,-292 610,-292"/>
</g>
<!-- hold_if_invalid&#45;&gt;no_scroll -->
<g id="edge4" class="edge">
<title>hold_if_invalid&#45;&gt;no_scroll</title>
<path fill="none" stroke="black" d="M578.81,-209.12C595.35,-222.43 611.82,-236.28 627,-250 637.22,-259.23 647.7,-269.76 657.24,-279.82"/>
<polygon fill="black" stroke="black" points="654.6,-282.12 663.98,-287.03 659.71,-277.33 654.6,-282.12"/>
<text text-anchor="start" x="650" y="-258" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">WAIT(,SIG_HIDE)</text>
</g>
<!-- ready&#45;&gt;0 -->
<g id="edge9" class="edge">
<title>ready&#45;&gt;0</title>
<path fill="none" stroke="black" d="M547.29,-479.69C552.78,-485.11 557.58,-491.22 561,-498 603.43,-582.13 591.77,-834.42 557,-922 552.75,-932.69 546.44,-942.85 539.23,-952.16"/>
<polygon fill="black" stroke="black" points="536.71,-949.71 533.04,-959.65 542.11,-954.17 536.71,-949.71"/>
<polygon fill="none" stroke="black" points="591,-733 591,-751 705,-751 705,-733 591,-733"/>
<text text-anchor="start" x="599.99" y="-740" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">WAIT(,SIG_CLOSE)</text>
<polygon fill="none" stroke="black" points="591,-713 591,-731 705,-731 705,-713 591,-713"/>
<text text-anchor="start" x="594" y="-719" font-family="Courier New" font-size="10.00" fill="green">consume the object</text>
<polygon fill="none" stroke="black" points="591,-681 591,-711 705,-711 705,-681 591,-681"/>
<text text-anchor="start" x="618" y="-699" font-family="Courier New" font-size="10.00" fill="blue">WOBJECT=0;</text>
<text text-anchor="start" x="618" y="-687" font-family="Courier New" font-size="10.00" fill="blue">ASHOW();</text>
<polygon fill="none" stroke="black" points="588,-678 588,-754 708,-754 708,-678 588,-678"/>
</g>
<!-- ready&#45;&gt;show_hint -->
<g id="edge7" class="edge">
<title>ready&#45;&gt;show_hint</title>
<path fill="none" stroke="black" d="M488.46,-479.75C485.36,-501.42 479.76,-530.13 470,-554 468.96,-556.53 467.89,-559.07 466.77,-561.61"/>
<polygon fill="black" stroke="black" points="463.61,-560.11 462.62,-570.66 469.97,-563.03 463.61,-560.11"/>
<polygon fill="none" stroke="black" points="488,-527 488,-545 554,-545 554,-527 488,-527"/>
<text text-anchor="start" x="494" y="-534" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">GRAB(0,0)</text>
<polygon fill="none" stroke="black" points="488,-507 488,-525 554,-525 554,-507 488,-507"/>
<text text-anchor="start" x="491" y="-513" font-family="Courier New" font-size="10.00" fill="blue">WOBJECT=0;</text>
<polygon fill="none" stroke="black" points="485,-504 485,-548 557,-548 557,-504 485,-504"/>
</g>
<!-- ready&#45;&gt;no_scroll -->
<g id="edge8" class="edge">
<title>ready&#45;&gt;no_scroll</title>
<path fill="none" stroke="black" d="M546.14,-412.07C565.91,-400.06 588.45,-386.4 609,-374 615.69,-369.97 622.67,-365.76 629.64,-361.57"/>
<polygon fill="black" stroke="black" points="631.04,-364.81 637.81,-356.66 627.44,-358.81 631.04,-364.81"/>
<text text-anchor="start" x="613" y="-382" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">WAIT(0,SIG_HIDE)</text>
</g>
<!-- no_scroll&#45;&gt;0 -->
<g id="edge5" class="edge">
<title>no_scroll&#45;&gt;0</title>
<path fill="none" stroke="black" d="M708.22,-355.99C710.2,-361.89 711.93,-368.05 713,-374 714.58,-382.75 713.01,-385.11 713,-394 712.78,-601.11 812.46,-678.88 712,-860 685.2,-908.32 634.92,-942.76 588,-965.95"/>
<polygon fill="black" stroke="black" points="586.6,-962.74 579.1,-970.23 589.63,-969.05 586.6,-962.74"/>
<polygon fill="none" stroke="black" points="734,-533 734,-551 800,-551 800,-533 734,-533"/>
<text text-anchor="start" x="740" y="-540" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">GRAB(0,0)</text>
<polygon fill="none" stroke="black" points="734,-501 734,-531 800,-531 800,-501 734,-501"/>
<text text-anchor="start" x="737" y="-519" font-family="Courier New" font-size="10.00" fill="blue">WOBJECT=0;</text>
<text text-anchor="start" x="737" y="-507" font-family="Courier New" font-size="10.00" fill="blue">SHOW();</text>
<polygon fill="none" stroke="black" points="731,-498 731,-554 803,-554 803,-498 731,-498"/>
</g>
<!-- no_scroll&#45;&gt;hold_if_invalid -->
<g id="edge6" class="edge">
<title>no_scroll&#45;&gt;hold_if_invalid</title>
<path fill="none" stroke="black" d="M590.25,-291.71C553.46,-281.15 520.63,-271.45 519,-270 509.83,-261.86 501.92,-252.2 495.09,-241.76"/>
<polygon fill="black" stroke="black" points="498.1,-239.98 489.91,-233.26 492.13,-243.62 498.1,-239.98"/>
<text text-anchor="start" x="523" y="-258" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">WAIT(0,SIG_SHOW)</text>
</g>
</g>
</svg>

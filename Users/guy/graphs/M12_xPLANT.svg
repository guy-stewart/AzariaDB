<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 7.1.0 (20230121.1956)
 -->
<!-- Title: Automaton Pages: 1 -->
<svg width="812pt" height="1045pt"
 viewBox="0.00 0.00 812.00 1045.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1041)">
<title>Automaton</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-1041 808,-1041 808,4 -4,4"/>
<!-- filename -->
<g id="node1" class="node">
<title>filename</title>
<polygon fill="none" stroke="black" points="0,-904.5 0,-1036.5 364,-1036.5 364,-904.5 0,-904.5"/>
<polygon fill="none" stroke="black" points="11,-1011.5 11,-1029.5 353,-1029.5 353,-1011.5 11,-1011.5"/>
<text text-anchor="start" x="152" y="-1018.5" font-family="Courier New" font-weight="bold" font-size="10.00">M12_xPLANT</text>
<polygon fill="none" stroke="black" points="11,-931.5 11,-1009.5 353,-1009.5 353,-931.5 11,-931.5"/>
<text text-anchor="start" x="14" y="-997.5" font-family="Courier New" font-size="10.00" fill="green">used in the temple to hold ingredients for spell making.</text>
<text text-anchor="start" x="14" y="-985.5" font-family="Courier New" font-size="10.00" fill="green">WIP1: The scroll holder</text>
<text text-anchor="start" x="14" y="-973.5" font-family="Courier New" font-size="10.00" fill="green">WIP2: The scroll map</text>
<text text-anchor="start" x="14" y="-961.5" font-family="Courier New" font-size="10.00" fill="green">SIG_SHOW: A scroll was dropped</text>
<text text-anchor="start" x="14" y="-949.5" font-family="Courier New" font-size="10.00" fill="green">SIG_HIDE: The scroll was grabbed</text>
<text text-anchor="start" x="14" y="-937.5" font-family="Courier New" font-size="10.00" fill="green">SIG_CLOSE: The spell is cast</text>
<polygon fill="none" stroke="black" points="11,-911.5 11,-929.5 353,-929.5 353,-911.5 11,-911.5"/>
<text text-anchor="start" x="136.99" y="-917.5" font-family="Courier New" font-size="10.00" fill="brown">start state = 0</text>
<polygon fill="none" stroke="black" points="8,-908.5 8,-1032.5 356,-1032.5 356,-908.5 8,-908.5"/>
</g>
<!-- 0 -->
<g id="node2" class="node">
<title>0</title>
<polyline fill="none" stroke="darkred" points="393,-987.5 567,-987.5"/>
<text text-anchor="start" x="475.8" y="-994.9" font-family="Courier New" font-weight="bold" font-size="14.00">0</text>
<polyline fill="none" stroke="darkred" points="393,-931.5 567,-931.5"/>
<polyline fill="none" stroke="darkred" points="567,-985.5 393,-985.5"/>
<text text-anchor="start" x="396" y="-973.5" font-family="Courier New" font-size="10.00" fill="green">IDLE</text>
<text text-anchor="start" x="396" y="-961.5" font-family="Courier New" font-size="10.00" fill="green">Wait here when no scroll</text>
<text text-anchor="start" x="396" y="-949.5" font-family="Courier New" font-size="10.00" fill="green">or ingredient not required </text>
<text text-anchor="start" x="396" y="-937.5" font-family="Courier New" font-size="10.00" fill="green">for the current scroll spell</text>
<path fill="none" stroke="darkred" d="M402,-928.5C402,-928.5 558,-928.5 558,-928.5 564,-928.5 570,-934.5 570,-940.5 570,-940.5 570,-1000.5 570,-1000.5 570,-1006.5 564,-1012.5 558,-1012.5 558,-1012.5 402,-1012.5 402,-1012.5 396,-1012.5 390,-1006.5 390,-1000.5 390,-1000.5 390,-940.5 390,-940.5 390,-934.5 396,-928.5 402,-928.5"/>
</g>
<!-- show_hint -->
<g id="node3" class="node">
<title>show_hint</title>
<polyline fill="none" stroke="darkred" points="252,-795 480,-795"/>
<text text-anchor="start" x="328.19" y="-802.4" font-family="Courier New" font-weight="bold" font-size="14.00">show_hint</text>
<polyline fill="none" stroke="darkred" points="252,-751 480,-751"/>
<polyline fill="none" stroke="darkred" points="480,-793 252,-793"/>
<text text-anchor="start" x="266.98" y="-781" font-family="Courier New" font-size="10.00" fill="green">1. There is a scroll attached</text>
<text text-anchor="start" x="266.98" y="-769" font-family="Courier New" font-size="10.00" fill="green">2. If this ingredient is required</text>
<text text-anchor="start" x="266.98" y="-757" font-family="Courier New" font-size="10.00" fill="green"> &#160;&#160;then a hint is displayed</text>
<polyline fill="none" stroke="darkred" points="252,-587 480,-587"/>
<polyline fill="none" stroke="darkred" points="480,-749 252,-749"/>
<text text-anchor="start" x="255" y="-737" font-family="Courier New" font-size="10.00" fill="blue">// find the ingredient</text>
<text text-anchor="start" x="255" y="-725" font-family="Courier New" font-size="10.00" fill="blue">// from S12_ING_x in wip2</text>
<text text-anchor="start" x="255" y="-713" font-family="Courier New" font-size="10.00" fill="blue">// and store in it bframe</text>
<text text-anchor="start" x="255" y="-701" font-family="Courier New" font-size="10.00" fill="blue">REF_MACHINE(WIP1);</text>
<text text-anchor="start" x="255" y="-689" font-family="Courier New" font-size="10.00" fill="blue">BFRAME=R_WOBJECT;</text>
<text text-anchor="start" x="255" y="-677" font-family="Courier New" font-size="10.00" fill="blue">MAPi(BFRAME,S12_SCROLL);</text>
<text text-anchor="start" x="255" y="-665" font-family="Courier New" font-size="10.00" fill="blue">MAP(BFRAME,WIP2);</text>
<text text-anchor="start" x="255" y="-653" font-family="Courier New" font-size="10.00" fill="blue">WACCEPT = BFRAME;</text>
<text text-anchor="start" x="255" y="-641" font-family="Courier New" font-size="10.00" fill="blue">if (WACCEPT &gt; 0) {</text>
<text text-anchor="start" x="255" y="-629" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;SHOW(WIP3); // show hint</text>
<text text-anchor="start" x="255" y="-617" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;MAPi(WACCEPT,S12_NATURE_REP);</text>
<text text-anchor="start" x="255" y="-605" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;C_ACCEPT(WACCEPT);</text>
<text text-anchor="start" x="255" y="-593" font-family="Courier New" font-size="10.00" fill="blue">}</text>
<polyline fill="none" stroke="darkred" points="252,-567 480,-567"/>
<polyline fill="none" stroke="darkred" points="480,-585 252,-585"/>
<text text-anchor="start" x="345" y="-573" font-family="Courier New" font-size="10.00" fill="blue">SHOW();</text>
<path fill="none" stroke="darkred" d="M261,-564C261,-564 471,-564 471,-564 477,-564 483,-570 483,-576 483,-576 483,-808 483,-808 483,-814 477,-820 471,-820 471,-820 261,-820 261,-820 255,-820 249,-814 249,-808 249,-808 249,-576 249,-576 249,-570 255,-564 261,-564"/>
</g>
<!-- 0&#45;&gt;show_hint -->
<g id="edge1" class="edge">
<title>0&#45;&gt;show_hint</title>
<path fill="none" stroke="black" d="M416.24,-924.6C402.5,-916.63 387.67,-909.21 373,-904 344.69,-893.94 258.78,-908.62 239,-886 219.33,-863.51 221.86,-837.77 235.33,-812.58"/>
<polygon fill="black" stroke="black" points="238.17,-814.65 240.24,-804.26 232.14,-811.09 238.17,-814.65"/>
<text text-anchor="start" x="243" y="-862" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">WAIT(,SIG_SHOW)</text>
</g>
<!-- show_hint&#45;&gt;0 -->
<g id="edge11" class="edge">
<title>show_hint&#45;&gt;0</title>
<path fill="none" stroke="black" d="M344.17,-823.75C345.47,-845.41 350.07,-866.98 360,-886 364.71,-895.02 378.24,-906.57 394.59,-918.19"/>
<polygon fill="black" stroke="black" points="392.47,-920.98 402.69,-923.78 396.45,-915.22 392.47,-920.98"/>
<text text-anchor="start" x="364" y="-862" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">WAIT(,SIG_HIDE)</text>
</g>
<!-- show_hint&#45;&gt;0 -->
<g id="edge12" class="edge">
<title>show_hint&#45;&gt;0</title>
<path fill="none" stroke="black" d="M450.34,-823.64C453.11,-829.75 455.69,-835.89 458,-842 466.57,-864.64 471.83,-890.82 475.04,-913.54"/>
<polygon fill="black" stroke="black" points="471.54,-913.77 476.3,-923.23 478.48,-912.86 471.54,-913.77"/>
<polygon fill="none" stroke="black" points="472,-865 472,-883 550,-883 550,-865 472,-865"/>
<text text-anchor="start" x="475" y="-872" font-family="Courier New" font-weight="bold" font-size="10.00" fill="blue">Z_EPSILON(,)</text>
<polygon fill="none" stroke="black" points="472,-845 472,-863 550,-863 550,-845 472,-845"/>
<text text-anchor="start" x="475" y="-851" font-family="Courier New" font-size="10.00" fill="brown">(WACCEPT==0)</text>
<polygon fill="none" stroke="black" points="469,-842 469,-886 553,-886 553,-842 469,-842"/>
</g>
<!-- ready -->
<g id="node5" class="node">
<title>ready</title>
<polyline fill="none" stroke="darkred" points="402,-439 582,-439"/>
<text text-anchor="start" x="471" y="-446.4" font-family="Courier New" font-weight="bold" font-size="14.00">ready</text>
<polyline fill="none" stroke="darkred" points="402,-407 582,-407"/>
<polyline fill="none" stroke="darkred" points="582,-437 402,-437"/>
<text text-anchor="start" x="405" y="-425" font-family="Courier New" font-size="10.00" fill="green">1. There is a scroll attached</text>
<text text-anchor="start" x="405" y="-413" font-family="Courier New" font-size="10.00" fill="green">2. An ingredient is present</text>
<path fill="none" stroke="darkred" d="M411,-404C411,-404 573,-404 573,-404 579,-404 585,-410 585,-416 585,-416 585,-452 585,-452 585,-458 579,-464 573,-464 573,-464 411,-464 411,-464 405,-464 399,-458 399,-452 399,-452 399,-416 399,-416 399,-410 405,-404 411,-404"/>
</g>
<!-- show_hint&#45;&gt;ready -->
<g id="edge10" class="edge">
<title>show_hint&#45;&gt;ready</title>
<path fill="none" stroke="black" d="M357.51,-560.1C357.88,-528.03 361.07,-499.14 370,-486 373.55,-480.78 377.74,-476.09 382.41,-471.88"/>
<polygon fill="black" stroke="black" points="384.45,-474.73 390.08,-465.76 380.08,-469.26 384.45,-474.73"/>
<polygon fill="none" stroke="black" points="373,-515 373,-533 463,-533 463,-515 373,-515"/>
<text text-anchor="start" x="391" y="-522" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">DROP(0,0)</text>
<polygon fill="none" stroke="black" points="373,-495 373,-513 463,-513 463,-495 373,-495"/>
<text text-anchor="start" x="376" y="-501" font-family="Courier New" font-size="10.00" fill="blue">SHOW(WOBJECT);</text>
<polygon fill="none" stroke="black" points="370,-492 370,-536 466,-536 466,-492 370,-492"/>
</g>
<!-- hold_if_invalid -->
<g id="node4" class="node">
<title>hold_if_invalid</title>
<polyline fill="none" stroke="darkred" points="340,-191 568,-191"/>
<text text-anchor="start" x="390.99" y="-198.4" font-family="Courier New" font-weight="bold" font-size="14.00">hold_if_invalid</text>
<polyline fill="none" stroke="darkred" points="340,-159 568,-159"/>
<polyline fill="none" stroke="darkred" points="568,-189 340,-189"/>
<text text-anchor="start" x="381.99" y="-177" font-family="Courier New" font-size="10.00" fill="green">Wait here if the object</text>
<text text-anchor="start" x="381.99" y="-165" font-family="Courier New" font-size="10.00" fill="green">is invalid for the spell</text>
<polyline fill="none" stroke="darkred" points="340,-7 568,-7"/>
<polyline fill="none" stroke="darkred" points="568,-157 340,-157"/>
<text text-anchor="start" x="343" y="-145" font-family="Courier New" font-size="10.00" fill="blue">// find the ingredient</text>
<text text-anchor="start" x="343" y="-133" font-family="Courier New" font-size="10.00" fill="blue">// from S12_ING_x in wip2</text>
<text text-anchor="start" x="343" y="-121" font-family="Courier New" font-size="10.00" fill="blue">// and store in it bframe</text>
<text text-anchor="start" x="343" y="-109" font-family="Courier New" font-size="10.00" fill="blue">REF_MACHINE(WIP1);</text>
<text text-anchor="start" x="343" y="-97" font-family="Courier New" font-size="10.00" fill="blue">BFRAME=R_WOBJECT;</text>
<text text-anchor="start" x="343" y="-85" font-family="Courier New" font-size="10.00" fill="blue">MAPi(BFRAME,S12_SCROLL);</text>
<text text-anchor="start" x="343" y="-73" font-family="Courier New" font-size="10.00" fill="blue">MAP(BFRAME,WIP2);</text>
<text text-anchor="start" x="343" y="-61" font-family="Courier New" font-size="10.00" fill="blue">WACCEPT = BFRAME;</text>
<text text-anchor="start" x="343" y="-49" font-family="Courier New" font-size="10.00" fill="blue">if (WACCEPT &gt; 0) {</text>
<text text-anchor="start" x="343" y="-37" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;MAPi(WACCEPT,S12_NATURE_REP);</text>
<text text-anchor="start" x="343" y="-25" font-family="Courier New" font-size="10.00" fill="blue"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;C_ACCEPT(WACCEPT);</text>
<text text-anchor="start" x="343" y="-13" font-family="Courier New" font-size="10.00" fill="blue">}</text>
<path fill="none" stroke="darkred" d="M349,-4C349,-4 559,-4 559,-4 565,-4 571,-10 571,-16 571,-16 571,-204 571,-204 571,-210 565,-216 559,-216 559,-216 349,-216 349,-216 343,-216 337,-210 337,-204 337,-204 337,-16 337,-16 337,-10 343,-4 349,-4"/>
</g>
<!-- hold_if_invalid&#45;&gt;show_hint -->
<g id="edge2" class="edge">
<title>hold_if_invalid&#45;&gt;show_hint</title>
<path fill="none" stroke="black" d="M417.28,-219.86C394.29,-293.92 366.85,-394.69 355,-486 351.8,-510.68 354.08,-517.13 355,-542 355.08,-544.24 355.17,-546.49 355.27,-548.76"/>
<polygon fill="black" stroke="black" points="351.77,-548.87 355.73,-558.7 358.76,-548.55 351.77,-548.87"/>
<text text-anchor="start" x="382" y="-370" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">GRAB(,)</text>
</g>
<!-- hold_if_invalid&#45;&gt;ready -->
<g id="edge3" class="edge">
<title>hold_if_invalid&#45;&gt;ready</title>
<path fill="none" stroke="black" d="M439,-219.79C436.61,-259.36 437.5,-304.14 447,-344 450.78,-359.86 457.87,-376.09 465.32,-390.27"/>
<polygon fill="black" stroke="black" points="462.16,-391.79 470.03,-398.88 468.3,-388.43 462.16,-391.79"/>
<text text-anchor="start" x="451" y="-308" font-family="Courier New" font-weight="bold" font-size="10.00" fill="blue">IS_A(WOBJECT,WACCEPT)</text>
</g>
<!-- no_scroll -->
<g id="node6" class="node">
<title>no_scroll</title>
<polyline fill="none" stroke="darkred" points="601,-315 787,-315"/>
<text text-anchor="start" x="656.19" y="-322.4" font-family="Courier New" font-weight="bold" font-size="14.00">no_scroll</text>
<polyline fill="none" stroke="darkred" points="601,-283 787,-283"/>
<polyline fill="none" stroke="darkred" points="787,-313 601,-313"/>
<text text-anchor="start" x="604" y="-301" font-family="Courier New" font-size="10.00" fill="green">1. There is no scroll attached</text>
<text text-anchor="start" x="604" y="-289" font-family="Courier New" font-size="10.00" fill="green">2. An ingredient is present</text>
<path fill="none" stroke="darkred" d="M610,-280C610,-280 778,-280 778,-280 784,-280 790,-286 790,-292 790,-292 790,-328 790,-328 790,-334 784,-340 778,-340 778,-340 610,-340 610,-340 604,-340 598,-334 598,-328 598,-328 598,-292 598,-292 598,-286 604,-280 610,-280"/>
</g>
<!-- hold_if_invalid&#45;&gt;no_scroll -->
<g id="edge4" class="edge">
<title>hold_if_invalid&#45;&gt;no_scroll</title>
<path fill="none" stroke="black" d="M579,-198.54C595.51,-211.32 611.92,-224.68 627,-238 637.42,-247.21 648.04,-257.8 657.66,-267.95"/>
<polygon fill="black" stroke="black" points="655.07,-270.31 664.45,-275.23 660.19,-265.53 655.07,-270.31"/>
<text text-anchor="start" x="650" y="-246" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">WAIT(,SIG_HIDE)</text>
</g>
<!-- ready&#45;&gt;0 -->
<g id="edge9" class="edge">
<title>ready&#45;&gt;0</title>
<path fill="none" stroke="black" d="M547.29,-467.69C552.78,-473.11 557.58,-479.22 561,-486 601.03,-565.37 589.83,-803.39 557,-886 552.75,-896.69 546.44,-906.85 539.22,-916.16"/>
<polygon fill="black" stroke="black" points="536.71,-913.71 533.03,-923.65 542.1,-918.17 536.71,-913.71"/>
<polygon fill="none" stroke="black" points="589,-709 589,-727 703,-727 703,-709 589,-709"/>
<text text-anchor="start" x="597.99" y="-716" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">WAIT(,SIG_CLOSE)</text>
<polygon fill="none" stroke="black" points="589,-689 589,-707 703,-707 703,-689 589,-689"/>
<text text-anchor="start" x="592" y="-695" font-family="Courier New" font-size="10.00" fill="green">consume the object</text>
<polygon fill="none" stroke="black" points="589,-657 589,-687 703,-687 703,-657 589,-657"/>
<text text-anchor="start" x="616" y="-675" font-family="Courier New" font-size="10.00" fill="blue">WOBJECT=0;</text>
<text text-anchor="start" x="616" y="-663" font-family="Courier New" font-size="10.00" fill="blue">ASHOW();</text>
<polygon fill="none" stroke="black" points="586,-654 586,-730 706,-730 706,-654 586,-654"/>
</g>
<!-- ready&#45;&gt;show_hint -->
<g id="edge7" class="edge">
<title>ready&#45;&gt;show_hint</title>
<path fill="none" stroke="black" d="M488.75,-467.87C485.76,-489.59 480.19,-518.31 470,-542 468.86,-544.66 467.66,-547.33 466.42,-549.99"/>
<polygon fill="black" stroke="black" points="463.32,-548.35 462.07,-558.87 469.61,-551.43 463.32,-548.35"/>
<polygon fill="none" stroke="black" points="488,-515 488,-533 554,-533 554,-515 488,-515"/>
<text text-anchor="start" x="494" y="-522" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">GRAB(0,0)</text>
<polygon fill="none" stroke="black" points="488,-495 488,-513 554,-513 554,-495 488,-495"/>
<text text-anchor="start" x="491" y="-501" font-family="Courier New" font-size="10.00" fill="blue">WOBJECT=0;</text>
<polygon fill="none" stroke="black" points="485,-492 485,-536 557,-536 557,-492 485,-492"/>
</g>
<!-- ready&#45;&gt;no_scroll -->
<g id="edge8" class="edge">
<title>ready&#45;&gt;no_scroll</title>
<path fill="none" stroke="black" d="M546.14,-400.07C565.91,-388.06 588.45,-374.4 609,-362 615.69,-357.97 622.67,-353.76 629.64,-349.57"/>
<polygon fill="black" stroke="black" points="631.04,-352.81 637.81,-344.66 627.44,-346.81 631.04,-352.81"/>
<text text-anchor="start" x="613" y="-370" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">WAIT(0,SIG_HIDE)</text>
</g>
<!-- no_scroll&#45;&gt;0 -->
<g id="edge5" class="edge">
<title>no_scroll&#45;&gt;0</title>
<path fill="none" stroke="black" d="M708.22,-343.99C710.2,-349.89 711.93,-356.05 713,-362 714.58,-370.75 713.03,-373.11 713,-382 712.33,-578.45 805.35,-652.24 710,-824 683.51,-871.72 634.09,-906.01 587.83,-929.26"/>
<polygon fill="black" stroke="black" points="586.52,-926 579.07,-933.54 589.59,-932.29 586.52,-926"/>
<polygon fill="none" stroke="black" points="735,-521 735,-539 801,-539 801,-521 735,-521"/>
<text text-anchor="start" x="741" y="-528" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">GRAB(0,0)</text>
<polygon fill="none" stroke="black" points="735,-489 735,-519 801,-519 801,-489 735,-489"/>
<text text-anchor="start" x="738" y="-507" font-family="Courier New" font-size="10.00" fill="blue">WOBJECT=0;</text>
<text text-anchor="start" x="738" y="-495" font-family="Courier New" font-size="10.00" fill="blue">SHOW();</text>
<polygon fill="none" stroke="black" points="732,-486 732,-542 804,-542 804,-486 732,-486"/>
</g>
<!-- no_scroll&#45;&gt;hold_if_invalid -->
<g id="edge6" class="edge">
<title>no_scroll&#45;&gt;hold_if_invalid</title>
<path fill="none" stroke="black" d="M590.26,-279.7C553.47,-269.14 520.64,-259.44 519,-258 509.58,-249.76 501.47,-239.89 494.49,-229.22"/>
<polygon fill="black" stroke="black" points="497.64,-227.65 489.44,-220.94 491.66,-231.3 497.64,-227.65"/>
<text text-anchor="start" x="523" y="-246" font-family="Courier New" font-weight="bold" font-size="10.00" fill="orange">WAIT(0,SIG_SHOW)</text>
</g>
</g>
</svg>
